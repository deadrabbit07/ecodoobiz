# PostgreSQL `psql` 명령어 정리

PostgreSQL의 터미널 클라이언트 `psql` 명령어 구조와 옵션, 접속 방법을 정리한 치트시트입니다.

---

## 1. psql 기본 구조

```bash
psql -U <유저이름> -d <데이터베이스이름> -h <호스트> -p <포트>
```

| 옵션 | 의미                      | 예시               |
| -- | ----------------------- | ---------------- |
| -U | 접속할 유저 이름               | -U example       |
| -d | 접속할 데이터베이스 이름           | -d my_project_db |
| -h | 호스트 주소 (기본값: localhost) | -h 127.0.0.1     |
| -p | 포트 번호 (기본값: 5432)       | -p 5432          |

**참고:** psql은 기본적으로 맨 뒤에 오는 인자를 데이터베이스 이름으로 간주합니다.

---

## 2. 접속 예시

| 명령어                          | 접속 유저     | 접속 DB         | 비고                |
| ---------------------------- | --------- | ------------- | ----------------- |
| `psql`                       | 현재 OS 사용자 | 같은 이름의 DB     | 기본 접속             |
| `psql postgres`              | 현재 OS 사용자 | postgres      | 기본 관리 DB          |
| `psql -U user my_project_db` | user      | my_project_db | 일반 프로젝트 DB 접속     |
| `psql -U example -d example` | example   | example       | 가장 명시적, 안전        |
| `psql -U example`            | example   | example       | DB명이 유저명과 같을 때 가능 |

**주의:**  `psql example -d example` 처럼 쓰면 중복 지정이 되므로, 권장하지 않음.

---

## 3. PostgreSQL 기본 규칙 (옵션 생략 시)

| 항목        | 기본값          |
| --------- | ------------ |
| 데이터베이스 이름 | 현재 유저 이름과 동일 |
| 유저 이름     | 현재 OS 사용자 이름 |
| 호스트       | localhost    |
| 포트        | 5432         |

예시:

```bash
# OS 사용자 이름이 user 라면
psql
# 내부적으로 psql -U user -d user -h localhost -p 5432 와 같음
```

---

## 4. psql 내부 명령어

| 명령              | 의미                              |
| --------------- | ------------------------------- |
| `\conninfo`     | 현재 접속한 유저 / DB / 포트 / 호스트 정보 확인 |
| `\q`            | psql 종료                         |
| `\du`           | 모든 role(유저) 목록 보기               |
| `\l` or `\list` | 모든 데이터베이스 목록 보기                 |
| `\c <dbname>`   | 다른 DB로 전환 (reconnect)           |
| `psql -l`       | 서버 안의 모든 데이터베이스 목록 출력           |

---

## 5. 요약

> “psql은 서버에 접속하는 명령이고, `-U`는 유저, `-d`는 DB를 지정한다. 옵션을 생략하면 유저명 = DB명 = 현재 OS 사용자명으로 간주된다. 또한 psql은 기본적으로 맨 뒤에 오는 인자를 데이터베이스 이름으로 생각한다.”

---
